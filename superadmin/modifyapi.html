<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8" /><link rel="stylesheet" type="text/css" href="../css/newcss.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template" />
<meta name="author" content="GeeksLabs" />
<meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal" />

<script src="../js/jquery-1.11.1.min.js"></script>
<script src="../js/jquery.cookie.js"></script>
<script src="../js/naibowang/superUrlParam.js"></script>
<script src="js/addel.jquery.js"></script>
<script src="../js/naibowang/superapi.js"></script>
<title>修改API信息</title>
<!-- Bootstrap CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" />
<!-- bootstrap theme -->
<link href="css/bootstrap-theme.css" rel="stylesheet" />
<!--external css-->
<!-- font icon -->
<link href="css/elegant-icons-style.css" rel="stylesheet" />
<link href="css/font-awesome.min.css" rel="stylesheet" />
<!-- full calendar css-->
<link href="assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css" rel="stylesheet" />
<link href="assets/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" />
<!-- easy pie chart-->
<link href="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen" />
<!-- owl carousel -->
<link rel="stylesheet" href="css/owl.carousel.css" type="text/css" />
<link href="css/jquery-jvectormap-1.2.2.css" rel="stylesheet" />
<!-- Custom styles -->
<link rel="stylesheet" href="css/fullcalendar.css" />
<link href="css/widgets.css" rel="stylesheet" />
<link href="css/style.css" rel="stylesheet" />
<link href="css/style-responsive.css" rel="stylesheet" />
<link href="css/xcharts.min.css" rel=" stylesheet" />
<link href="css/jquery-ui-1.10.4.min.css" rel="stylesheet" />
<!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
<!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <script src="js/lte-ie7.js"></script>
    <![endif]-->
</head>
<body>
<!-- container section start -->
<section id="container" class="">
  <header class="header dark-bg">
    <div class="toggle-nav">
      <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    <!--logo start--> 
    <img class='gflogo' src="../images/api-logo_95fb06f.png"/>
    <!--logo end-->
    <div class="top-nav notification-row"> 
      <!-- notificatoin dropdown start-->
      <ul class="nav pull-right top-menu">
        <li id="usname" style="line-height: 30px"></li>
        <li>
          <button class="btn btn-default" id="logout">注销</button>
        </li>
        <!-- user login dropdown end -->
      </ul>
      <!-- notificatoin dropdown end--> 
    </div>
  </header>
  <aside>
    <div id="sidebar" class="nav-collapse "> 
      <!-- sidebar menu start-->
      <ul class="sidebar-menu">
        <li> <a class="" href="index.html"> <i class="icon_house_alt"></i> <span>服务台</span> </a> </li>
      </ul>
      <!-- sidebar menu end--> 
    </div>
  </aside>
  <section id="main-content">
    <section class="wrapper">
      <div class="row">
        <div class="col-lg-12">
          <h3 class="page-header"><i class="fa fa-laptop"></i>第三方服务管理</h3>
          <ol class="breadcrumb">
            <li><i class="fa fa-home"></i><a href="index.html">主页</a></li>
            <li><i class="fa fa-laptop"></i><a href="index.html" id="serviceplat">第三方服务管理</a></li>
            <li><i class="fa fa-book"></i><a href="apimanage.html" id="apimanage">API管理</a></li>
            <li><i class="fa fa-edit"></i>修改API</li>
          </ol>
        </div>
      </div>
      <div class="table-responsive">
        <form class="form-control" id="theform" method="post" onsubmit="return addcheck(0)" style="height: 100%">
          <h4 align="center" id="servicename">修改API</h4>
          <p></p>
          <p></p>
          <p></p>
          <p></p>
          <input type="hidden" id="apiId" name="apiId" value=""/>
          <input type="hidden" id="serviceId" name="serviceId" value=""/>
          <script>
		var sid = getUrlParam("sid");
		if(sid==null || sid =="")
			window.location.href="index.html";
		$("#apiId").val(getUrlParam("id"));
			  $("#serviceId").val(getUrlParam("sid"));
        $("#serviceplat").attr("href",$.cookie("serviceurl"));
			$("#apimanage").attr("href","apimanageothers.html?id="+getUrlParam("sid"));
			var link = server+"/service/manage/detail.do?serviceId="+getUrlParam("sid");
			$.get(link,function(result){
					if(result.status)
					{
						alert(result.msg);
						window.location.href="index.html";
						return;
					}
				$("#servicename").html(result.data.serviceName+"——修改API");
			});
		</script>
          <p align="center" style="margin-top: 10px">&nbsp;</p>
          <div class="input-group"> <span class="input-group-addon">API名称：</span>
            <input type="text" id="apiname" name="apiname" required class="form-control" aria-describedby="basic-addon1" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">API标识：</span>
            <input type="text" class="form-control" required name="mark" id="mark" aria-describedby="basic-addon1"/>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">APPKEY：</span>
            <input type="text" class="form-control" required name="keyapp" id="keyapp" aria-describedby="basic-addon1"/>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">接口地址：</span>
            <input type="text" class="form-control" required aria-describedby="basic-addon1" id="apiAddress" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">API路径：</span>
            <input type="text" class="form-control" required name="path" id="path" aria-describedby="basic-addon1" placeholder="例如huiyutech/p2p_user" />
          </div>
          <p></p>
          <div class="input-group" style="display: none"> <span class="input-group-addon">需要前缀：</span>
            <select class="form-control" name="stripPrefix" readonly required id="stripPrefix">
              <option value="1">不需要</option>
              <option value="0">需要</option>
            </select>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">API描述：</span>
            <input type="text" class="form-control" name="description" required id="description" aria-describedby="basic-addon1" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">链接方式：</span>
            <select class="form-control" name="linkmethod" required id="linkmethod">
              <option value="HTTP">HTTP</option>
              <option value="HTTPS">HTTPS</option>
            </select>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">调用方式：</span>
            <select class="form-control" name="apiCallWay" required id="apiCallWay">
              <option value="GET POST">GET POST</option>
              <option value="GET">GET</option>
              <option value="POST">POST</option>
            </select>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">API介绍：</span>
            <input type="text" class="form-control" name="apiIntroduction" required id="apiIntroduction" aria-describedby="basic-addon1" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">调用限制：</span>
            <input type="number" min="0"  class="form-control" name="callLimit" required id="callLimit" aria-describedby="basic-addon1" value="0" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">IP调用限制：</span>
            <input type="number" min="0" class="form-control" name="callIpLimit" required id="callIpLimit" aria-describedby="basic-addon1" value="0" />
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon" style="width: 120px;word-wrap:normal">请求参数：</span>
            <div class="addel">
              <div class="form-control" style="width:2500px"  id="arguexcel">
                <button type="button" class="btn btn-primary btn-block addel-add" style="max-width: 440px">增加</button>
              </div>
            </div>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon" style="width: 120px;word-wrap:normal">返回结果：</span>
            <div class="addel2">
              <div class="form-control" style="width:2500px"  id="arguexcel2">
                <button type="button" class="btn btn-primary btn-block addel-add" style="max-width: 440px">增加</button>
              </div>
            </div>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon" style="width: 120px;word-wrap:normal">错误码：</span>
            <div class="addel3">
              <div class="form-control" style="width:2500px"  id="errorexcel">
                <button type="button" class="btn btn-primary btn-block addel-add" style="max-width: 440px">增加</button>
              </div>
            </div>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">返回格式：</span>
            <select class="form-control" required name="returnStyle" id="returnStyle">
              <option value="JSON">JSON</option>
              <option value="XML">XML</option>
            </select>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">请求示例：</span>
            <input type="text" class="form-control" required aria-describedby="basic-addon1" id="callExample" name="callExample"/>
          </div>
          <p></p>
          <div class="input-group"> <span class="input-group-addon">返回示例：</span>
            <textarea class="form-control" required id="rresult" name="callExample" rows="3"></textarea>
          </div>
          <p></p>
          <p align="center" style="margin-top: 10px">
            <input id="btnn" class="btn btn-primary btn-lg" type="submit" value="修改API" />
          </p>
          <script>
              $(document).ready(function () {
                  var tid = getUrlParam("id");
                  if(tid==null || tid =="")
                      window.location.href="index.html";
                  var link = server+"/api/manage/detail.do?apiId="+getUrlParam("id");
                  $.get(link,function(result){
                      if(result.status)
                      {
                          alert(result.msg);
                          window.location.href="index.html";
                          return;
                      }
                      $("#apiname").val(result.data.name);
                      $("#keyapp").val(result.data.appkey);
                      $("#mark").val(result.data.mark);
                      $("#apiAddress").val(result.data.apiAddress);
                      $("#path").val(result.data.path);
                      $("#stripPrefix").val(result.data.stripPrefix);
                      $("#description").val(result.data.description);
                      $("#apiIntroduction").val(result.data.apiIntroduction);
                      $("#callLimit").val(result.data.callLimit);
                      $("#callIpLimit").val(result.data.callIpLimit);
                      $("#returnStyle").val(result.data.returnStyle);
                      $("#callExample").val(result.data.callExample);
                      $("#rresult").val(result.data.result);
                      var apiCallWay = result.data.apiCallWay;
                      apiCallWay = apiCallWay.split(" ");
                      $("#linkmethod").val(apiCallWay[0]);
                      var apicall = apiCallWay[1];
                      for(var i = 2;i<apiCallWay.length;i++)
                          apicall += " "+apiCallWay[i];
                      $("#apiCallWay").val(apicall);
                      var errorcd = result.data.errorCode;
                      errorcd = $.parseJSON(errorcd);
                      var i;
                      var st = "";
                      if(errorcd.length == 0)//如果为空，添加默认值
                          st=`<div class="form-group target form-inline" style="display: none;">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="number" min="0" class="form-control" name="wrongnum[]"  required="" placeholder="错误码" style="max-width: 180px;text-align: center" disabled>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="wrongdes[]" required="" placeholder="说明" style="margin-left: 15px;max-width: 180px;text-align: center" disabled>
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      for(i=0;i<errorcd.length;i++)
                      {
                          st+=`<div class="form-group target form-inline">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="number" min="0"  class="form-control" name="wrongnum[]" value="${errorcd[i].错误码}" required placeholder="错误码" style="max-width: 180px;text-align: center">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="wrongdes[]" required value="${errorcd[i].说明}" placeholder="说明" style="margin-left: 15px;max-width: 180px;text-align: center">
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      }
                      $("#errorexcel").prepend(st);
                      var inputargu = $.parseJSON(result.data.arguments);
                      st = "";
                      if(inputargu.length == 0)//如果为空，添加默认值
                          st=`<div class="form-group target form-inline" style="display: none;">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="text" class="form-control" name="name[]" required="" placeholder="名称" style="max-width: 140px;text-align: center" disabled="">
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="type[]" style="margin-left: 15px;max-width: 180px;text-align: center" required>
                        <option value="string">string</option>
                        <option value="int">int</option>
                        <option value="float">float</option>
                        <option value="double">double</option>
                        <option value="bool">bool</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="musttype[]" style="margin-left: 15px;max-width: 180px;text-align: center" required="" disabled="">
                        <option value="是">必填</option>
                        <option value="否">非必填</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="example[]" required="" placeholder="示例值" style="margin-left: 25px;max-width: 180px;text-align: center" disabled="">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="descip[]" required="" placeholder="描述" style="margin-left: 15px;max-width: 180px;text-align: center" disabled="">
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      for(i=0;i<inputargu.length;i++)
                      {
                          st+=`<div class="form-group target form-inline" style="display: block;">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="text" class="form-control" name="name[]" required="" value="${inputargu[i].名称}" placeholder="名称" style="max-width: 140px;text-align: center">
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="type[]" id="type${i}" style="margin-left: 15px;max-width: 180px;text-align: center" required>
                        <option value="string">string</option>
                        <option value="int">int</option>
                        <option value="float">float</option>
                        <option value="double">double</option>
                        <option value="bool">bool</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="musttype[]" id="musttype${i}" style="margin-left: 15px;max-width: 180px;text-align: center" required="">
                        <option value="是">必填</option>
                        <option value="否">非必填</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="example[]" required="" value="${inputargu[i].示例值.replaceAll("\"","&quot;")}" placeholder="示例值" style="margin-left: 25px;max-width: 180px;text-align: center">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="descip[]" required="" value="${inputargu[i].描述}" placeholder="描述" style="margin-left: 15px;max-width: 180px;text-align: center">
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      }
                      $("#arguexcel").prepend(st);
                      for(i=0;i<inputargu.length;i++)
                      {
                          $("#musttype"+i).val(inputargu[i].必填);
                          $("#type"+i).val(inputargu[i].类型);
                      }
                      var inputargu2 = $.parseJSON(result.data.resultArguments);
                      st = "";
                      if(inputargu2.length == 0)//如果为空，添加默认值
                          st=`<div class="form-group target form-inline" style="display: none;">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="text" class="form-control" name="name2[]" required="" placeholder="名称" style="max-width: 140px;text-align: center" disabled="">
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="type2[]" style="margin-left: 15px;max-width: 180px;text-align: center" required>
                        <option value="string">string</option>
                        <option value="int">int</option>
                        <option value="float">float</option>
                        <option value="double">double</option>
                        <option value="bool">bool</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="example2[]" required="" placeholder="示例值" style="margin-left: 25px;max-width: 180px;text-align: center" disabled="">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="descip2[]" required="" placeholder="描述" style="margin-left: 15px;max-width: 180px;text-align: center" disabled="">
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      for(i=0;i<inputargu2.length;i++)
                      {
                          st+=`<div class="form-group target form-inline">
                  <div class="form-inline">
                    <div class="form-group">
                      <input type="text"  class="form-control" name="name2[]" value="${inputargu2[i].名称}" required placeholder="名称" style="max-width: 140px;text-align: center">
                    </div>
                    <div class="form-group">
                      <select class="form-control" name="type2[]" id="type2${i}" style="margin-left: 15px;max-width: 180px;text-align: center" required>
                        <option value="string">string</option>
                        <option value="int">int</option>
                        <option value="float">float</option>
                        <option value="double">double</option>
                        <option value="bool">bool</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="example2[]" required value="${inputargu2[i].示例值.replaceAll("\"","&quot;")}" placeholder="示例值" style="margin-left: 25px;max-width: 180px;text-align: center">
                    </div>
                    <div class="form-group">
                      <input type="text" class="form-control" name="descip2[]" value="${inputargu2[i].描述}" required placeholder="描述" style="margin-left: 15px;max-width: 180px;text-align: center">
                    </div>
                    <button type="button" class="btn btn-danger addel-delete" style="margin-left:15px">删除</button>
                  </div>
                </div>`;
                      }
                      $("#arguexcel2").prepend(st);
                      for(i=0;i<inputargu2.length;i++)
                      {
                          $("#type2"+i).val(inputargu2[i].类型);
                      }
                  });

              });
              $(function () {
                  $("#serviceothers").addClass("active");
              });
          </script>
          <table class="table table-striped">
            <style>
						   td,th{
							   text-align: center;
							   width: 10px;
							   table-layout:fixed;
						   }
							   .input-group-addon
							 {
								 width:120px;
								 text-align: right;
							 }
							 .input-group
							 {
								 width:100%;
							 }
							 .tablestyle td,.tablestyle th
							 {
								 max-width: 20px;
								 text-overflow: ellipsis;
								 overflow: hidden;
								 white-space:nowrap;
							 }
							</style>
          </table>
        </form>
      </div>
      <!--/row-->
      <div> </div>
    </section>
  </section>
  <!--main content end--> 
</section>
<!-- container section start --> 
<script src="js/jquery-ui-1.10.4.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script> 
<!-- bootstrap --> 
<script src="js/bootstrap.min.js"></script> 
<!-- nice scroll --> 
<script src="js/jquery.scrollTo.min.js"></script> 
<script src="js/jquery.nicescroll.js" type="text/javascript"></script> 
<!-- charts scripts --> 
<script src="assets/jquery-knob/js/jquery.knob.js"></script> 
<script src="js/jquery.sparkline.js" type="text/javascript"></script> 
<script src="assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js"></script> 
<script src="js/owl.carousel.js"></script> 
<!-- jQuery full calendar --> &lt; 
<script src="js/fullcalendar.min.js"></script> 
<!-- Full Google Calendar - Calendar --> 
<script src="assets/fullcalendar/fullcalendar/fullcalendar.js"></script> 
<!--script for this page only--> 
<script src="js/calendar-custom.js"></script> 
<script src="js/jquery.rateit.min.js"></script> 
<!-- custom select --> 
<script src="js/jquery.customSelect.min.js"></script> 
<script src="assets/chart-master/Chart.js"></script> 
<!--custome script for all page--> 
<script src="js/scripts.js"></script> 
<!-- custom script for this page--> 
<script src="js/sparkline-chart.js"></script> 
<script src="js/easy-pie-chart.js"></script> 
<script src="js/jquery-jvectormap-1.2.2.min.js"></script> 
<script src="js/jquery-jvectormap-world-mill-en.js"></script> 
<script src="js/xcharts.min.js"></script> 
<script src="js/jquery.autosize.min.js"></script> 
<script src="js/jquery.placeholder.min.js"></script> 
<script src="js/gdp-data.js"></script> 
<script src="js/morris.min.js"></script> 
<script src="js/sparklines.js"></script> 
<script src="js/charts.js"></script> 
<script src="js/jquery.slimscroll.min.js"></script> 
<script>

      //knob
      $(function() {
        $(".knob").knob({
          'draw' : function () { 
            $(this.i).val(this.cv + '%')
          }
        })
      });

      //carousel
      $(document).ready(function() {
          $("#owl-slider").owlCarousel({
              navigation : true,
              slideSpeed : 300,
              paginationSpeed : 400,
              singleItem : true

          });
      });

      //custom select box

      $(function(){
          $('select.styled').customSelect();
      });
	  
	  /* ---------- Map ---------- */
	$(function(){
	  $('#map').vectorMap({
	    map: 'world_mill_en',
	    series: {
	      regions: [{
	        values: gdpData,
	        scale: ['#000', '#000'],
	        normalizeFunction: 'polynomial'
	      }]
	    },
		backgroundColor: '#eef3f7',
	    onLabelShow: function(e, el, code){
	      el.html(el.html()+' (GDP - '+gdpData[code]+')');
	    }
	  });
	});



  </script>
</body>
</html>